% crochet

command main-html: Root do
  agata with-root: Root do: {
    purr with-default-handlers: {
      agata show: ps-welcome;
    }
  };
end

command purr with-default-handlers: (Block is (() -> any)) do
  handle
    Block();
  with
    on purr.open-project(Project) do
      agata show: new ps-summary(Project);
    end
  end
end