% crochet

command agata-widget with-progress-root: (Builder is (dom-modal-progress -> nothing)) =
  new w-modal-progress(agata-widget blank, Builder);

command dom-modal-progress show: (Label has to-widget) do
  let Node = dom-renderer render: Label;
  foreign dom.render(self.label-box, Node.box);
  foreign dom.show-modal(self.root-box);
  self;
end

command dom-modal-progress hide do
  foreign dom.hide-modal(self.root-box);
  self;
end