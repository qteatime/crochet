% crochet

open crochet.concurrency;
open crochet.ui.agata;
open crochet.time;

singleton todo-app;

command main-html: Root do
  timer with-real-timer: {
    agata-dom with-root: Root do: {
      let Todo = new todo([]);
      let Cell = #observable-cell with-value: Todo;
      agata show: Cell;

      for I in 1 to: 5 do
        timer sleep: 2 seconds | wait;
        Cell <- Cell value add: (#todo-item with-title: "Item [I to-text]");
      end
    };
  }
end
