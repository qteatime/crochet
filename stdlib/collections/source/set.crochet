% crochet

command tuple as set = new set(self deduplicate);

command set union: (X is set) =
  (self.values ++ X.values) as set;

command set contains: Value =
  (self.values) contains: Value;

command set as tuple =
  self.values;

command set intersection: (X is set) =
  (for A in self.values, B in X.values if A === B do A end) as set;

command set difference: (X is set) =
  (for A in self.values if not (X contains: A) do A end) as set;