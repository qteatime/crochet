% crochet

abstract surface;

trait surface-rendering with
  command Surface replace-with: (W has to-widget) -> Surface;
  command Surface append: (W has to-widget) -> Surface;
  command Surface prepend: (W has to-widget) -> Surface;
  command Surface on-detached: (() -> nothing) -> Surface;
  command Surface on-attached: (() -> nothing) -> Surface;
end

implement surface-rendering for surface;